{% extends "base.html" %}

{% block title %}{{ book.title }} - Book Details{% endblock %}

{% block page_title %}Book Details{% endblock %}

{% block mainblock %}
    <div class="col-12">
        <!-- Book Details Card with horizontal layout -->
        <div class="card book-card mb-4">
            <div class="card-body p-4">
                <div class="row g-4">
                    <!-- Book Cover Image (Left) -->
                    <div class="col-md-3 col-sm-4">
                        <img src="{{ book.cover_image }}" 
                             alt="Cover of {{ book.title }}" 
                             class="book-details-cover img-fluid w-100"
                             style="max-width: 200px;"
                             onerror="this.src='https://via.placeholder.com/200x300/cccccc/666666?text=No+Cover'">
                    </div>

                    <!-- Book Information (Right) -->
                    <div class="col-md-9 col-sm-8">
                        <!-- Title -->
                        <h2 class="book-title mb-2">{{ book.title }}</h2>
                        
                        <!-- Author -->
                        <h3 class="book-author mb-3">By {{ book.author }}</h3>
                        
                        <!-- Metadata -->
                        <div class="book-meta mb-3">
                            Category: {{ book.category }}{% if book.genres %}, {{ book.genres }}{% endif %}<br>
                            {% if book.get('pages') %}
                            Pages: {{ book.pages }}<br>
                            {% endif %}
                            Copies: <span class="bold-number">{{ book.copies }}</span> Available: <span class="bold-number">{{ book.available }}</span>
                        </div>
                        
                        <!-- Full Description -->
                        <div class="book-details-description">
                            <div>{{ book.formatted_description|safe }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="text-right">
            {% if book.available > 0 %}
            <!-- Make a Loan Button (only if available copies exist) -->
            <a href="{{ url_for('bookController.make_loan', book_id=book.id) }}" 
               class="btn btn-success make-loan-btn mr-2">
                Make a Loan
            </a>
            {% endif %}
            
            <!-- Back Button -->
            <a href="{{ url_for('bookController.book_titles') }}" 
               class="btn btn-success back-btn">
                Back to Book Titles
            </a>
        </div>
    </div>
{% endblock %}