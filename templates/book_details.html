{% extends "base.html" %}

{% block title %}{{ book.title }} - Book Details{% endblock %}

{% block content %}
    <!-- Book Details Header -->
    <div class="page-header">
        <h1 class="page-title">Book Details</h1>
    </div>
    
    <!-- Content Body -->
    <div class="content-body">
        <!-- Back Navigation -->
        <div class="mb-4">
            <a href="{{ url_for('book_titles') }}" 
               style="background: #6c757d; color: white; padding: 10px 20px; border-radius: 6px; text-decoration: none; font-weight: 500; display: inline-block; transition: all 0.3s ease;"
               onmouseover="this.style.background='#5a6268';"
               onmouseout="this.style.background='#6c757d';">
                ‚Üê Back to Book Titles
            </a>
        </div>

        <!-- Book Details Card -->
        <div class="book-card" style="max-width: none;">
            <!-- Book Cover -->
            <div style="min-width: 200px; text-align: center;">
                <img src="{{ book.cover_image }}" 
                     alt="Cover of {{ book.title }}" 
                     style="width: 200px; height: auto; border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.25);"
                     onerror="this.src='https://via.placeholder.com/200x300/cccccc/666666?text=No+Cover'">
                
                <!-- Category Badge -->
                <div style="margin-top: 20px;">
                    <span style="background: #28a745; color: white; padding: 8px 16px; border-radius: 20px; font-size: 1rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">
                        {{ book.category }}
                    </span>
                </div>
            </div>
            
            <!-- Book Information -->
            <div class="book-info" style="flex: 1;">
                <!-- Title and Author - Same styling as book titles page -->
                <h1 class="book-title" style="font-size: 2.2rem; margin-bottom: 12px;">{{ book.title }}</h1>
                <h2 class="book-author" style="font-size: 2.2rem; margin-bottom: 25px;">By {{ book.author }}</h2>
                
                <!-- Detailed Metadata -->
                <div style="background: #f8f9fa; border: 2px solid #e9ecef; padding: 25px; border-radius: 12px; margin-bottom: 25px;">
                    <div class="row">
                <div class="col-md-6">
                    <div style="margin-bottom: 25px;">
                        <h6 style="font-weight: 700; color: #2d5a3d; margin-bottom: 10px;">üìö Availability</h6>
                        <div style="background: #d4edda; border: 1px solid #c3e6cb; border-radius: 6px; padding: 12px;">
                            <span style="color: #155724; font-weight: 600;">‚úÖ Available for borrowing</span>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 25px;">
                        <h6 style="font-weight: 700; color: #2d5a3d; margin-bottom: 10px;">üíª Format</h6>
                        <div style="background: #d1ecf1; border: 1px solid #bee5eb; border-radius: 6px; padding: 12px;">
                            <span style="color: #0c5460; font-weight: 600;">Digital E-Book Only</span>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div style="margin-bottom: 25px;">
                        <h6 style="font-weight: 700; color: #2d5a3d; margin-bottom: 10px;">üîó Related Books</h6>
                        <p style="color: #6c757d; margin-bottom: 10px;">Explore more books in this category:</p>
                        <a href="{{ url_for('book_titles', category=book.category.lower()) }}" 
                           style="background: #28a745; color: white; padding: 8px 16px; border-radius: 6px; text-decoration: none; font-weight: 600; display: inline-block; transition: all 0.3s ease;"
                           onmouseover="this.style.background='#218838'; this.style.transform='translateY(-1px)';"
                           onmouseout="this.style.background='#28a745'; this.style.transform='translateY(0)';">
                            Browse {{ book.category }} Books ‚Üí
                        </a>
                    </div>
                    
                    <div style="margin-bottom: 25px;">
                        <h6 style="font-weight: 700; color: #2d5a3d; margin-bottom: 10px;">üè† Library Info</h6>
                        <p style="color: #6c757d; font-size: 0.95rem; line-height: 1.5;">
                            This book is part of the SG Library collection. 
                            <a href="{{ url_for('book_titles') }}" style="color: #28a745; text-decoration: none; font-weight: 600;">
                                Explore our complete catalog
                            </a>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation Footer -->
        <div class="text-center mt-4 mb-4">
            <div style="display: inline-flex; gap: 20px; align-items: center;">
                <a href="{{ url_for('book_titles') }}" 
                   style="background: #6c757d; color: white; padding: 12px 24px; border-radius: 6px; text-decoration: none; font-weight: 600; transition: all 0.3s ease;"
                   onmouseover="this.style.background='#5a6268';"
                   onmouseout="this.style.background='#6c757d';">
                    ‚Üê Back to Book Titles
                </a>
                
                <a href="#" onclick="window.scrollTo(0,0); return false;" 
                   style="background: transparent; color: #6c757d; padding: 12px 24px; border: 2px solid #6c757d; border-radius: 6px; text-decoration: none; font-weight: 600; transition: all 0.3s ease;"
                   onmouseover="this.style.background='#6c757d'; this.style.color='white';"
                   onmouseout="this.style.background='transparent'; this.style.color='#6c757d';">
                    ‚Üë Back to Top
                </a>
            </div>
        </div>
    </div>
{% endblock %}
                        <div class="col-md-6">
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #2d5a3d;">üìÖ Publication Year:</strong> 
                                <span style="color: #495057;">{{ book.publication_year }}</span>
                            </div>
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #2d5a3d;">üè¢ Publisher:</strong> 
                                <span style="color: #495057;">{{ book.publisher }}</span>
                            </div>
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #2d5a3d;">üìö ISBN:</strong> 
                                <code style="background: #e9ecef; padding: 2px 6px; border-radius: 4px; font-size: 0.9rem;">{{ book.isbn }}</code>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #2d5a3d;">üè∑Ô∏è Category:</strong> 
                                <span style="color: #495057;">{{ book.category }}</span>
                            </div>
                            {% if book.get('pages') %}
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #2d5a3d;">üìÑ Pages:</strong> 
                                <span style="color: #495057;">{{ book.pages }}</span>
                            </div>
                            {% endif %}
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #2d5a3d;">üìñ Format:</strong> 
                                <span style="color: #495057;">E-Book</span>
                            </div>
                            <div style="margin-bottom: 12px;">
                                <strong style="color: #2d5a3d;">‚úÖ Status:</strong> 
                                <span style="color: #28a745; font-weight: 600;">Available</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div class="row mb-4">
                    <div class="col-md-6 mb-3">
                        <button style="background: #28a745; color: white; border: none; padding: 15px; border-radius: 8px; font-size: 1.1rem; font-weight: 600; width: 100%; opacity: 0.7; cursor: not-allowed;">
                            üìñ Borrow Book (Coming Soon)
                        </button>
                    </div>
                    <div class="col-md-6 mb-3">
                        <button style="background: transparent; color: #ffc107; border: 2px solid #ffc107; padding: 15px; border-radius: 8px; font-size: 1.1rem; font-weight: 600; width: 100%; opacity: 0.7; cursor: not-allowed;">
                            ‚≠ê Add to Favorites (Coming Soon)
                        </button>
                    </div>
                </div>
                
                <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; padding: 15px;">
                    <small style="color: #856404; font-style: italic;">
                        Note: Borrowing and favorites features will be available in the full version of the application.
                    </small>
                </div>
            </div>
        </div>

        <!-- Full Description Section -->
        <div style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); margin-top: 25px;">
            <h3 style="color: #2d5a3d; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 3px solid #e9ecef; font-size: 1.5rem; font-weight: 600;">
                üìù Full Description
            </h3>
            <div style="color: #495057; font-size: 1.1rem; line-height: 1.8;">
                {% if book.description %}
                    {% set paragraphs = book.description.split('\n') %}
                    {% if paragraphs|length > 1 %}
                        {% for paragraph in paragraphs %}
                            {% if paragraph.strip() %}
                                <p style="margin-bottom: 20px; text-align: justify;">{{ paragraph.strip() }}</p>
                            {% endif %}
                        {% endfor %}
                    {% else %}
                        {% set sentences = book.description.split('. ') %}
                        {% for sentence in sentences %}
                            {% if sentence.strip() %}
                                <p style="margin-bottom: 20px; text-align: justify;">
                                    {{ sentence.strip() }}{% if not sentence.endswith('.') %}.{% endif %}
                                </p>
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                {% else %}
                    <p style="color: #6c757d; font-style: italic; text-align: center; padding: 40px 0;">
                        No detailed description is available for this book.
                    </p>
                {% endif %}
            </div>
        </div>

        <!-- Additional Information -->
        <div style="background: white; border-radius: 12px; padding: 30px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); margin-top: 25px;">
            <h3 style="color: #2d5a3d; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 3px solid #e9ecef; font-size: 1.5rem; font-weight: 600;">
                ‚ÑπÔ∏è Additional Information
            </h3>
            
            <div class="row">